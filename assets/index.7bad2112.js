const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}};M();class k{constructor(t,e){this.ship=t,this.position=e,this.length=e.length,this.hits=[]}hit(t){return this.hits.push(t),this.isSunk(),this.hits}isSunk(){return this.position.sort().join(",")===this.hits.sort().join(",")}}class v{constructor(){this.grid=this.init(),this.ships=[]}init(){let t=[];for(let e=0;e<10;e++){let s=[];for(let r=0;r<10;r++)s.push({hasShip:!1,ship:{},isShot:!1});t.push(s)}return t}checkGrid(){let t=[];this.grid.forEach(e=>{const s=e.map(r=>{const i=r.hasShip?"X":" ",n=r.isShot?"S":" ";return`${i}${n}`});t.push(s)}),console.log(t)}createShip(t,e,s){const r={carrier:5,battleship:4,destroyer:3,submarine:3,patrolBoat:2};let i=[];if(this.grid[t[0]][t[1]].hasShip)return"Other Ship in Starting";for(let c=0;c<r[e];c++){let a=t.slice(0);const l=s?1:0;if(a[l]+c>9&&c!=0)return"Does Not Fit on Board";if(a[l]=a[l]+c,this.grid[a[0]][a[1]].hasShip)return"Other Ship in Place";i.push(a)}const n=new k(e,i);for(let c=0;c<i.length;c++){const a=i[c],l=a[0],y=a[1];this.grid[l][y].hasShip=!0,this.grid[l][y].ship=n}return this.ships.push(n),i}receiveAttack(t){const e=this.grid[t[0]][t[1]];return e.isShot?!1:(e.isShot=!0,e.hasShip?e.ship.hit(t):e.isShot)}isAllSunk(){return this.ships.every(t=>t.isSunk())}}class w{constructor(t,e){this.board=t,this.oppBoard=e,this.prevMove}setUpShips(){const t=["carrier","battleship","destroyer","submarine","patrolBoat"];let e=[],s=0;for(;s!=t.length;){let r=[Math.round(Math.random()*9),Math.round(Math.random()*9)];if(e.some(n=>n===r))continue;const i=this.board.createShip(r,t[s],Math.random()>.5);typeof i!="string"&&(i.forEach(n=>{e.push(n)}),s++)}return"Happy Path"}attack(){let t=[Math.round(Math.random()*9),Math.round(Math.random()*9)];if(this.prevMove&&this.oppBoard.grid[this.prevMove[0]][this.prevMove[1]].hasShip){const e=this.prevMove[0],s=this.prevMove[1];t=[[e+1,s],[e-1,s],[e,s+1],[e,s-1]].sort(()=>.5-Math.random())[0]}this.oppBoard.receiveAttack(t)||this.attack(),this.prevMove=t}}const G=document.querySelectorAll(".grid");G.forEach(o=>{for(let t=0;t<100;t++){const e=document.createElement("div");e.classList.add("gridItem"),o.appendChild(e)}});let S=!0;const g=document.querySelector("#playerGrid"),P=document.querySelector("#aiGrid");let u,f;function I(){u=new v,f=new w(u,p),p.grid.forEach((o,t)=>{o.forEach((e,s)=>{if(e.hasShip){const r=t*10+s;g.children[r].classList.add("addedShip")}})}),f.setUpShips(),u.checkGrid(),Array.from(P.children).forEach(o=>{o.addEventListener("click",E)})}function E(o){const t=o.target,e=document.querySelector(".textArea");if(!S||t.classList.contains("hitShot")||t.classList.contains("missShot"))return;const s=L(t).toString(),r=s[1]?[parseInt(s[0]),parseInt(s[1])]:[0,parseInt(s[0])];if(u.receiveAttack(r)===!0?(t.classList.add("missShot"),e.textContent="It's a Miss"):(t.classList.add("hitShot"),e.textContent="It's a Hit"),u.isAllSunk())return A("Player");S=!1,x()}function x(){f.attack();const o=f.prevMove,t=parseInt(`${o[0]}${o[1]}`);if(p.grid[o[0]][o[1]].hasShip?g.children[t].classList.add("hitShot"):g.children[t].classList.add("missShot"),p.isAllSunk())return A("AI");S=!0}function A(o){const t=document.querySelector(".overlay"),e=document.querySelector("#winnerPopUp");console.log(`${o} is the Winner`),e.textContent=`The Winner is The ${o}`,t.classList.add("active"),e.classList.add("active")}let m=!1;const p=new v,b=document.querySelector("#rotate");function q(){document.querySelector("#placementGrid").classList.toggle("vertical"),m=!m}b.addEventListener("click",q);const B=document.querySelectorAll("#placementGrid > .gridItem");let h=0;const d=[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrolBoat",length:2}];function C(o){const t=$(L(o.target)),e=[t.row,t.column],s=d[h];if(!Array.isArray(p.createShip(e,s.name,!m)))return;const r=o.target.parentNode.children;for(let c=0;c<s.length;c++){const a=m?t.index+c*10:t.index+c;r[a].classList.add("addedShip")}if(s.name==="patrolBoat")return U();h++,document.documentElement.style.setProperty("--ship-length",`${100*d[h].length}%`);const n=document.querySelector("#popUp > h1");n.textContent=`Place your ${d[h].name=="patrolBoat"?"Patrol Boat":`${d[h].name[0].toUpperCase()}${d[h].name.slice(1)}`}`}B.forEach(o=>{o.addEventListener("click",C)});function U(){const o=document.querySelector(".overlay");document.querySelector("#popUp").classList.remove("active"),o.classList.remove("active"),I()}function $(o){const t=document.getElementById("placementGrid"),e=window.getComputedStyle(t).gridTemplateColumns.split(" ").length,s=Math.floor(o/e),r=o%e;return{row:s,column:r,index:o}}function L(o){for(var t=o.parentNode.children,e=0;e<t.length;e++)if(t[e]==o)return e}console.log("test");
