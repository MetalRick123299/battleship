const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}};M();class k{constructor(t,e){this.ship=t,this.position=e,this.length=e.length,this.hits=[]}hit(t){return this.hits.push(t),this.isSunk(),this.hits}isSunk(){return this.position.sort().join(",")===this.hits.sort().join(",")}}class v{constructor(){this.grid=this.init(),this.ships=[]}init(){let t=[];for(let e=0;e<10;e++){let s=[];for(let o=0;o<10;o++)s.push({hasShip:!1,ship:{},isShot:!1});t.push(s)}return t}checkGrid(){let t=[];this.grid.forEach(e=>{const s=e.map(o=>{const n=o.hasShip?"X":" ",i=o.isShot?"S":" ";return`${n}${i}`});t.push(s)}),console.log(t)}createShip(t,e,s){const o={carrier:5,battleship:4,destroyer:3,submarine:3,patrolBoat:2};let n=[];if(this.grid[t[0]][t[1]].hasShip)return"Other Ship in Starting";for(let c=0;c<o[e];c++){let a=t.slice(0);const l=s?1:0;if(a[l]+c>9&&c!=0)return"Does Not Fit on Board";if(a[l]=a[l]+c,this.grid[a[0]][a[1]].hasShip)return"Other Ship in Place";n.push(a)}const i=new k(e,n);for(let c=0;c<n.length;c++){const a=n[c],l=a[0],y=a[1];this.grid[l][y].hasShip=!0,this.grid[l][y].ship=i}return this.ships.push(i),n}receiveAttack(t){const e=this.grid[t[0]][t[1]];return e.isShot?!1:(e.isShot=!0,e.hasShip?e.ship.hit(t):e.isShot)}isAllSunk(){return this.ships.every(t=>t.isSunk())}}class w{constructor(t,e){this.board=t,this.oppBoard=e,this.prevMove}setUpShips(){const t=["carrier","battleship","destroyer","submarine","patrolBoat"];let e=[],s=0;for(;s!=t.length;){let o=[Math.round(Math.random()*9),Math.round(Math.random()*9)];if(e.some(i=>i===o))continue;const n=this.board.createShip(o,t[s],Math.random()>.5);typeof n!="string"&&(n.forEach(i=>{e.push(i)}),s++)}return"Happy Path"}attack(){let t=[Math.round(Math.random()*9),Math.round(Math.random()*9)];if(this.prevMove&&this.oppBoard.grid[this.prevMove[0]][this.prevMove[1]].hasShip){const e=this.prevMove[0],s=this.prevMove[1];t=[[e+1,s],[e-1,s],[e,s+1],[e,s-1]].sort(()=>.5-Math.random())[0]}this.oppBoard.receiveAttack(t)||this.attack(),this.prevMove=t}}const P=document.querySelectorAll(".grid");P.forEach(r=>{for(let t=0;t<100;t++){const e=document.createElement("div");e.classList.add("gridItem"),r.appendChild(e)}});console.log("grids");let g=!0;const S=document.querySelector("#playerGrid"),G=document.querySelector("#aiGrid");let u,m;function I(){u=new v,m=new w(u,f),f.grid.forEach((r,t)=>{r.forEach((e,s)=>{if(e.hasShip){const o=t*10+s;S.children[o].classList.add("addedShip")}})}),m.setUpShips(),u.checkGrid(),Array.from(G.children).forEach(r=>{r.addEventListener("click",x)})}function x(r){const t=r.target,e=document.querySelector(".textArea");if(console.log(),!g||t.classList.contains("hitShot")||t.classList.contains("missShot"))return;const s=L(t).toString(),o=s[1]?[parseInt(s[0]),parseInt(s[1])]:[0,parseInt(s[0])];if(u.receiveAttack(o)===!0?(t.classList.add("missShot"),e.textContent="It's a Miss"):(t.classList.add("hitShot"),e.textContent="It's a Hit"),u.isAllSunk())return A("Player");g=!1,E()}function E(){m.attack();const r=m.prevMove,t=parseInt(`${r[0]}${r[1]}`);if(f.grid[r[0]][r[1]].hasShip?S.children[t].classList.add("hitShot"):S.children[t].classList.add("missShot"),f.isAllSunk())return A("AI");console.log(r),g=!0}function A(r){const t=document.querySelector(".overlay"),e=document.querySelector("#winnerPopUp");console.log(`${r} is the Winner`),e.textContent=`The Winner is The ${r}`,t.classList.add("active"),e.classList.add("active")}let p=!1;const f=new v,b=document.querySelector("#rotate");function q(){document.querySelector("#placementGrid").classList.toggle("vertical"),p=!p,console.log(p)}b.addEventListener("click",q);const $=document.querySelectorAll("#placementGrid > .gridItem");let h=0;const d=[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrolBoat",length:2}];function B(r){const t=U(L(r.target)),e=[t.row,t.column];console.log(`${t.row}, ${t.column} -- ${t.index}`);const s=d[h];if(!Array.isArray(f.createShip(e,s.name,!p)))return;const o=r.target.parentNode.children;console.log("Placed Ship");for(let c=0;c<s.length;c++){const a=p?t.index+c*10:t.index+c;o[a].classList.add("addedShip")}if(s.name==="patrolBoat")return C();h++,document.documentElement.style.setProperty("--ship-length",`${100*d[h].length}%`);const i=document.querySelector("#popUp > h1");i.textContent=`Place your ${d[h].name=="patrolBoat"?"Patrol Boat":`${d[h].name[0].toUpperCase()}${d[h].name.slice(1)}`}`}$.forEach(r=>{r.addEventListener("click",B)});function C(){const r=document.querySelector(".overlay");document.querySelector("#popUp").classList.remove("active"),r.classList.remove("active"),I()}function U(r){const t=document.getElementById("placementGrid"),e=window.getComputedStyle(t).gridTemplateColumns.split(" ").length,s=Math.floor(r/e),o=r%e;return{row:s,column:o,index:r}}function L(r){for(var t=r.parentNode.children,e=0;e<t.length;e++)if(t[e]==r)return e}console.log("test");
